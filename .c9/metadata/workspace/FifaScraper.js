{"changed":true,"filter":false,"title":"FifaScraper.js","tooltip":"/FifaScraper.js","value":"var phantom = require('node-phantom');\n\n\nfunction FifaScraper(url) {\n  this.url = url\n  this.init();\n\n};\n\nFifaScraper.prototype.init = function() {\n  var json = [];\n  var json2 = [];\n  var data = {};\n  phantom.create(function(err, ph) {\n    return ph.createPage(function(err, page) {\n      return page.open(\"https://www.easports.com/fifa/game-data/stats/thescrewcross/fifa15-ps4/futSeasons\", function(err, status) {\n        console.log(\"opened site? \", status);\n        page.includeJs('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', function(err) {\n          //jQuery Loaded.\n          return page.open(\"https://www.easports.com/fifa/game-data/stats/thescrewcross/fifa15-ps4/futSeasons\", function(err, status) {\n            //Wait for a bit for AJAX content to load on the page. Here, we are waiting 5 seconds.\n            setTimeout(function() {\n              return page.evaluate(function() {\n                //Get what you want from the page using jQuery. A good way is to populate an object with all the jQuery commands that you need and then return the object.\n                var h2Arr = [],\n                  pArr = [];\n                $('div.table-list li div.align-right').each(function() {\n                  h2Arr.push($(this).text());\n                });\n                $('p.stat-number').each(function() {\n                  pArr.push($(this).text());\n                });\n\n                return {\n                  h2: h2Arr,\n                  p: pArr\n                };\n              }, function(err, result) {\n                console.log(result);\n                ph.exit();\n              });\n            }, 5000);\n          });\n        });\n      });\n    });\n  });\n \n};\nmodule.exports = FifaScraper;","undoManager":{"mark":-1,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":47,"column":1},"end":{"row":48,"column":36},"action":"remove","lines":[" this.data = data;","  console.log(JSON.stringify(data));"]}]}]]},"ace":{"folds":[],"scrolltop":600,"scrollleft":0,"selection":{"start":{"row":36,"column":18},"end":{"row":36,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":25,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1419134808199}